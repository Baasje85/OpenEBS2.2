{% extends "base.html" %}
{% load i18n %}

{% block title %}Scenario's{% endblock %}

{% block content %}

  <h1>{% trans "Scenario's" %}
      <a class="btn btn-success pull-right" href="{% url 'scenario_add' %}">
        <span class="glyphicon glyphicon-plus-sign"></span> {% trans "Nieuw scenario" %}
      </a>
  </h1>
  <table class="table table-bordered table-striped table-condensed">
  <tr>
        <th class="col-lg-1">{% trans "Naam"%}</th>
        <th class="col-lg-6">{% trans "Omschrijving" %}</th>
        <th class="col-lg-1">{% trans "Berichten" %}</th>
        <th class="col-lg-4">&nbsp;</th>
  </tr>
  {% for scenario in object_list %}
      <tr>
        <td><a href="{% url 'scenario_edit' scenario.pk %}">{{ scenario.name }}<a/></td>
        <td>{{ scenario.description|default:"<em><geen></em>" }}&nbsp;</td>
        <td class="text-center">
            {% if scenario.kv15scenariomessage_set.count > 0 %}
            <a class="msg-count btn btn-link" data-title="{% trans 'Berichten bij scenario' %}" data-html="true" data-content="{% include 'openebs/snippet_message-list.html' %}">
                {{ scenario.kv15scenariomessage_set.count }}</a>
            {% else %}
                0
            {% endif %}
        </td>
        <td class="text-right">
            <form method="post" action="{% url 'scenario_delete' scenario.pk %}">
                {% csrf_token %}
                <button class="btn btn-link pull-right">
                    <span class="glyphicon glyphicon-trash"></span> {% trans "Verwijder" %}
                </button>
            </form>
            <a href="{% url 'scenario_edit' scenario.pk %}" class="btn btn-link pull-right">
                <span class="glyphicon glyphicon-edit"></span> {% trans "Bewerk" %}&nbsp;&nbsp;
            </a>
            <a href="{% url 'scenario_msg_add' scenario.pk %}" class="btn btn-link pull-right">
                <span class="glyphicon glyphicon-plus"></span> {% trans "Bericht toevoegen" %}&nbsp;&nbsp;
            </a>
        </td>
    </tr>
  {% empty %}
      <tr><td colspan=4 class="text-center"><em>{% trans "Er zijn nog geen scenario's" %}</em></td></tr>
  {% endfor %}
  </table>
{% endblock %}

{% block js_init %}
    $('.msg-count').popover();
    $('.msg-count').click(function () {
        $('.halte-count').not(this).popover('hide');
    });
{% endblock %}